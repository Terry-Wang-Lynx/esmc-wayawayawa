# ESM-C è›‹ç™½è´¨åˆ†ç±»å·¥å…·é›†

åŸºäº ESM-C (600M) çš„è›‹ç™½è´¨åºåˆ—åˆ†ç±»å·¥å…·é›†ï¼ŒåŒ…å«ä¸¤ç§ä¸åŒçš„è®­ç»ƒç­–ç•¥ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æä¾›äº†ä¸¤ç§è›‹ç™½è´¨åºåˆ—åˆ†ç±»æ–¹æ¡ˆï¼Œé’ˆå¯¹ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼š

1. **`discovery/`** - å¤§è§„æ¨¡æ•°æ®æŒ–æ˜ï¼ˆä»æµ·é‡åºåˆ—ä¸­å¿«é€Ÿç­›é€‰ç›®æ ‡è›‹ç™½ï¼‰
2. **`classify/`** - ç²¾ç»†åˆ†ç±»æŒ–æ˜ï¼ˆå°æ ·æœ¬é«˜è´¨é‡åˆ†ç±»ä¸è¯­ä¹‰ç©ºé—´åˆ†æï¼‰

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
esmc-wayawayawa/
â”œâ”€â”€ discovery/         # å¤§è§„æ¨¡æ•°æ®æŒ–æ˜æ–¹æ¡ˆ
â”‚   â”œâ”€â”€ train.py
â”‚   â”œâ”€â”€ predict.py
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ classify/          # ç²¾ç»†åˆ†ç±»æŒ–æ˜æ–¹æ¡ˆï¼ˆSETFIT ç­–ç•¥ï¼‰
â”‚   â”œâ”€â”€ stage1_pretrain.py
â”‚   â”œâ”€â”€ stage2_finetune.py
â”‚   â”œâ”€â”€ predict.py
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ datasets/          # å…±äº«æ•°æ®é›†ç›®å½•
â”œâ”€â”€ data/              # ESM-C æ¨¡å‹æƒé‡
â”‚   â””â”€â”€ weights/
â”œâ”€â”€ sdk/               # Forge API å®¢æˆ·ç«¯
â”œâ”€â”€ models/            # ESM æ¨¡å‹å®šä¹‰
â”œâ”€â”€ tokenization/      # åˆ†è¯å™¨
â””â”€â”€ README.md          # æœ¬æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒé…ç½®

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/Terry-Wang-Lynx/esmc-wayawayawa.git
cd esmc-wayawayawa

# é…ç½® ESM-C ç¯å¢ƒï¼ˆéœ€è¦ Python 3.8+ï¼‰
conda create -n esm3 python=3.10
conda activate esm3
pip install torch numpy matplotlib scikit-learn umap-learn
```

### 2. ä¸‹è½½æ¨¡å‹æƒé‡

ä» [Hugging Face](https://huggingface.co/EvolutionaryScale/esmc-600m-2024-12/tree/main/data/weights) ä¸‹è½½ ESM-C æƒé‡ï¼š

```bash
mkdir -p data/weights
# ä¸‹è½½ esmc_600m_2024_12_v0.pth åˆ° data/weights/
```

### 3. é€‰æ‹©æ–¹æ¡ˆ

#### æ–¹æ¡ˆ Aï¼šå¤§è§„æ¨¡æ•°æ®æŒ–æ˜ï¼ˆ`discovery/`ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼š
- ğŸ” ä» UniRefã€SwissProt ç­‰å¤§å‹æ•°æ®åº“ä¸­ç­›é€‰ç›®æ ‡è›‹ç™½
- ğŸ“Š å¤„ç†æåº¦ä¸å¹³è¡¡æ•°æ®ï¼ˆæ­£è´Ÿæ ·æœ¬æ¯”ä¾‹ 1:100 ç”šè‡³ 1:1000ï¼‰
- âš¡ éœ€è¦å¿«é€Ÿè®­ç»ƒå’Œé«˜é€šé‡é¢„æµ‹
- ğŸ’¾ ä¸­ç­‰åˆ°å¤§è§„æ¨¡æ ·æœ¬é‡ï¼ˆ1000+ æ¡æ­£æ ·æœ¬ï¼‰

**å…¸å‹åº”ç”¨**ï¼š
- ä»ç™¾ä¸‡çº§åºåˆ—åº“ä¸­æŒ–æ˜ç‰¹å®šåŠŸèƒ½è›‹ç™½ï¼ˆå¦‚ TIM-barrelã€é…ªæ°¨é…¸é…¶ï¼‰
- å¤§è§„æ¨¡è›‹ç™½è´¨åŠŸèƒ½æ³¨é‡Š
- é«˜é€šé‡è™šæ‹Ÿç­›é€‰

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
cd discovery
python3 train.py  # è®­ç»ƒ
python3 predict.py  # é¢„æµ‹
```

è¯¦è§ [`discovery/README.md`](discovery/README.md)

#### æ–¹æ¡ˆ Bï¼šç²¾ç»†åˆ†ç±»æŒ–æ˜ï¼ˆ`classify/`ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼š
- ğŸ¯ å°æ ·æœ¬é«˜è´¨é‡åˆ†ç±»ï¼ˆ< 100 æ¡æ­£æ ·æœ¬ï¼‰
- ğŸ“ˆ éœ€è¦æ·±å…¥ç†è§£è¯­ä¹‰ç©ºé—´åˆ†å¸ƒ
- ğŸ”¬ ç²¾ç»†åŒºåˆ†é«˜åº¦ç›¸ä¼¼çš„è›‹ç™½äºšç±»
- ğŸ§ª ç ”ç©¶è›‹ç™½è´¨åºåˆ—-åŠŸèƒ½å…³ç³»

**å…¸å‹åº”ç”¨**ï¼š
- åŒºåˆ†å•é“œ/åŒé“œè›‹ç™½ç­‰ç²¾ç»†äºšå‹
- è›‹ç™½è´¨å®¶æ—å†…éƒ¨åˆ†ç±»
- æ¢ç´¢æ€§æ•°æ®åˆ†æä¸å¯è§†åŒ–

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
cd classify
python3 stage1_pretrain.py  # å¯¹æ¯”å­¦ä¹ é¢„è®­ç»ƒ
python3 stage2_finetune.py  # åˆ†ç±»å¤´è®­ç»ƒ
python3 predict.py input.fasta  # é¢„æµ‹
```

è¯¦è§ [`classify/README.md`](classify/README.md)

## ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”

| ç‰¹æ€§ | `discovery/` | `classify/` |
|------|--------------|-------------|
| **æ ¸å¿ƒç›®æ ‡** | å¤§è§„æ¨¡æ•°æ®æŒ–æ˜ | ç²¾ç»†åˆ†ç±»æŒ–æ˜ |
| **å…¸å‹åœºæ™¯** | ä»ç™¾ä¸‡çº§åº“ä¸­ç­›é€‰ | å°æ ·æœ¬ç²¾å‡†åˆ†ç±» |
| **è®­ç»ƒç­–ç•¥** | å•é˜¶æ®µï¼ˆç›´æ¥åˆ†ç±»ï¼‰ | ä¸¤é˜¶æ®µï¼ˆå¯¹æ¯”å­¦ä¹  + åˆ†ç±»ï¼‰ |
| **é€‚ç”¨æ•°æ®é‡** | ä¸­å¤§è§„æ¨¡ï¼ˆ1000+ï¼‰ | å°æ ·æœ¬ï¼ˆ< 100ï¼‰ |
| **æ•°æ®ä¸å¹³è¡¡** | æåº¦ä¸å¹³è¡¡ï¼ˆ1:1000ï¼‰ | ç›¸å¯¹å¹³è¡¡ï¼ˆ1:1 åˆ° 1:10ï¼‰ |
| **è®­ç»ƒæ—¶é—´** | è¾ƒçŸ­ï¼ˆå•é˜¶æ®µï¼‰ | è¾ƒé•¿ï¼ˆä¸¤é˜¶æ®µï¼‰ |
| **é¢„æµ‹é€Ÿåº¦** | å¿«é€Ÿï¼ˆé«˜é€šé‡ï¼‰ | ä¸­ç­‰ |
| **å¯è§†åŒ–** | åŸºç¡€ï¼ˆè®­ç»ƒæ›²çº¿ï¼‰ | ä¸°å¯Œï¼ˆUMAP/t-SNE è¯­ä¹‰ç©ºé—´ï¼‰ |
| **å¤æ‚åº¦** | ä½ | é«˜ |
| **æ³›åŒ–èƒ½åŠ›** | ä¸­ç­‰ | é«˜ |

## ğŸ› ï¸ æ ¸å¿ƒåŠŸèƒ½

### å…±äº«ç‰¹æ€§

- âœ… **ESM-C 600M åŸºåº§**ï¼šä½¿ç”¨ EvolutionaryScale çš„è›‹ç™½è´¨è¯­è¨€æ¨¡å‹
- âœ… **çµæ´»çš„å±‚å†»ç»“ç­–ç•¥**ï¼šå¯é€‰æ‹©å†»ç»“/è§£å†»ç¼–ç å™¨å±‚
- âœ… **å®æ—¶è®­ç»ƒç›‘æ§**ï¼šè¯¦ç»†çš„æ—¥å¿—å’Œè¿›åº¦è¾“å‡º
- âœ… **å¤šæ ¼å¼è¾“å‡º**ï¼šCSVã€FASTA ç­‰æ ¼å¼çš„é¢„æµ‹ç»“æœ

### `discovery/` ç‹¬æœ‰ï¼ˆå¤§è§„æ¨¡æŒ–æ˜ï¼‰

- ğŸ” **é«˜é€šé‡é¢„æµ‹**ï¼šå¿«é€Ÿå¤„ç†ç™¾ä¸‡çº§åºåˆ—
- âš¡ **åŠ¨æ€è´Ÿé‡‡æ ·**ï¼šè‡ªåŠ¨å¹³è¡¡æåº¦ä¸å¹³è¡¡æ•°æ®
- ğŸ“ˆ **å®æ—¶è¯„ä¼°**ï¼šæ¯è½®è‡ªåŠ¨åœ¨éªŒè¯é›†ä¸Šè¯„ä¼°
- ğŸ’¾ **å‘¨æœŸæ€§ä¿å­˜**ï¼šå®šæœŸä¿å­˜æ¨¡å‹æ£€æŸ¥ç‚¹ï¼Œé˜²æ­¢æ„å¤–ä¸­æ–­
- ğŸ“Š **è®­ç»ƒæ›²çº¿å¯è§†åŒ–**ï¼šLossã€Accuracyã€F1 ç­‰æŒ‡æ ‡å®æ—¶ç»˜å›¾

### `classify/` ç‹¬æœ‰ï¼ˆç²¾ç»†åˆ†ç±»ï¼‰

- ğŸ¯ **å¯¹æ¯”å­¦ä¹ é¢„è®­ç»ƒ**ï¼šé€šè¿‡ CosineEmbeddingLoss ä¼˜åŒ–è¯­ä¹‰ç©ºé—´
- ğŸ“Š **è¯­ä¹‰ç©ºé—´å¯è§†åŒ–**ï¼šUMAP/t-SNE é™ç»´å¯è§†åŒ–ï¼Œç›´è§‚å±•ç¤ºåˆ†ç±»è¾¹ç•Œ
- ğŸ”„ **æ–­ç‚¹æ¢å¤**ï¼šæ”¯æŒè®­ç»ƒä¸­æ–­åç»§ç»­
- ğŸ§ª **å°æ ·æœ¬ä¼˜åŒ–**ï¼šSETFIT ç­–ç•¥ï¼Œé€‚åˆå°‘é‡æ ‡æ³¨æ•°æ®

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- [å¯¹æ¯”å­¦ä¹ æ–¹æ¡ˆè¯¦ç»†æ–‡æ¡£](classify/README.md)
- [ç›´æ¥å¾®è°ƒæ–¹æ¡ˆè¯¦ç»†æ–‡æ¡£](discovery/README.md)

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: æˆ‘åº”è¯¥é€‰æ‹©å“ªä¸ªæ–¹æ¡ˆï¼Ÿ

**é€‰æ‹© `discovery/`ï¼ˆå¤§è§„æ¨¡æŒ–æ˜ï¼‰å¦‚æœï¼š**
- ä» UniRefã€SwissProt ç­‰å¤§å‹æ•°æ®åº“ä¸­ç­›é€‰ç›®æ ‡è›‹ç™½
- æ•°æ®æåº¦ä¸å¹³è¡¡ï¼ˆæ­£è´Ÿæ ·æœ¬æ¯”ä¾‹ 1:100+ï¼‰
- æœ‰ 1000+ æ¡æ­£æ ·æœ¬
- éœ€è¦é«˜é€šé‡é¢„æµ‹

**é€‰æ‹© `classify/`ï¼ˆç²¾ç»†åˆ†ç±»ï¼‰å¦‚æœï¼š**
- å°æ ·æœ¬åœºæ™¯ï¼ˆ< 100 æ¡æ­£æ ·æœ¬ï¼‰
- éœ€è¦æ·±å…¥ç†è§£è¯­ä¹‰ç©ºé—´åˆ†å¸ƒ
- ç²¾ç»†åŒºåˆ†é«˜åº¦ç›¸ä¼¼çš„è›‹ç™½äºšç±»
- éœ€è¦é«˜è´¨é‡å¯è§†åŒ–åˆ†æ

### Q: å¦‚ä½•å¤„ç†æ˜¾å­˜ä¸è¶³ï¼Ÿ

å‡å°æ‰¹æ¬¡å¤§å°ï¼ˆ`BATCH_SIZE`ï¼‰æˆ–å‡å°‘è§£å†»å±‚æ•°ï¼ˆ`UNFREEZE_LAYERS`ï¼‰ã€‚

### Q: è®­ç»ƒéœ€è¦å¤šä¹…ï¼Ÿ

- `classify/`ï¼šçº¦ 1-2 å°æ—¶ï¼ˆå–å†³äºæ•°æ®é‡å’Œè½®æ•°ï¼‰
- `discovery/`ï¼šçº¦ 30 åˆ†é’Ÿ - 1 å°æ—¶

## ğŸ“ å¼•ç”¨

å¦‚æœä½¿ç”¨æœ¬é¡¹ç›®ï¼Œè¯·å¼•ç”¨ï¼š

```bibtex
@software{esmc_wayawayawa,
  author = {Terry Wang},
  title = {ESM-C Protein Classification Toolkit},
  year = {2025},
  url = {https://github.com/Terry-Wang-Lynx/esmc-wayawayawa}
}
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºã€‚

---

**ç‰ˆæœ¬**: 2.0  
**æœ€åæ›´æ–°**: 2025-11-27  
**ä½œè€…**: Terry Wang
